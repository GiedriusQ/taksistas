{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["var url = {\n    register: 'api/register',\n    login   : 'api/login',\n    games   : 'api/games'\n};\nvar api_key, game_id, in_game = false;\n\nfunction hideAll() {\n    in_game = false;\n    $('div.jumbotron > div').hide();\n}\nfunction registerUsingNick(nick) {\n    $.ajax({\n        type    : \"POST\",\n        url     : url.register,\n        data    : {nick: nick},\n        success : function (data) {\n            $('[data-name]').html(nick);\n            api_key = data.data.api_key;\n            $('[data-key]').html(data.data.api_key);\n            hideAll();\n            $('#register-box').show();\n        },\n        error   : function (data) {\n            swal('Validation error', data.responseJSON.error.nick, \"error\");\n        },\n        dataType: 'json'\n    });\n}\nfunction loginUsingKey(key) {\n    $.ajax({\n        type    : \"POST\",\n        url     : url.login,\n        data    : {api_key: key},\n        success : function (data) {\n            $('[data-name]').html(data.data.nick);\n            api_key = key;\n            $('[data-key]').html(key);\n            $('#continue').click();\n        },\n        error   : function (data) {\n            swal('Validation error', data.responseJSON.error.api_key, \"error\");\n        },\n        dataType: 'json'\n    });\n}\n$('#log-in').click(function () {\n    var nick = $('#nick').val();\n    var key = $('#key').val();\n    if (nick != '' && key == '') {\n        registerUsingNick(nick);\n    }\n    if (key != '' && nick == '') {\n        loginUsingKey(key);\n    }\n});\nfunction loadGames() {\n    $.ajax({\n        type    : \"GET\",\n        data    : {api_key: api_key},\n        url     : url.games,\n        success : function (data) {\n            hideAll();\n            $('#games-box').show();\n            var $games_my = $('#games-list-my');\n            var $games_playing = $('#games-list-playing');\n            var $games_other = $('#games-list-other');\n            $games_my.html('');\n            $games_playing.html('');\n            $games_other.html('');\n            if (data.data.games_my.length == 0) {\n                $games_my.append('<li>No games available</li>');\n            }\n            else {\n                $.each(data.data.games_my, function (key, game) {\n                    $games_my.append('<li class=\"list-group-item pointer\" data-game-id=\"' + key + '\">' + game + '</li>');\n                });\n            }\n            if (data.data.games_playing.length == 0) {\n                $games_playing.append('<li>No games available</li>');\n            }\n            else {\n                $.each(data.data.games_playing, function (key, game) {\n                    $games_playing.append('<li class=\"list-group-item pointer\" data-game-id=\"' + key + '\">' + game + '</li>');\n                });\n            }\n            if (data.data.games_other.length == 0) {\n                $games_other.append('<li>No games available</li>');\n            }\n            else {\n                $.each(data.data.games_other, function (key, game) {\n                    $games_other.append('<li class=\"list-group-item pointer\" data-game-id=\"' + key + '\">' + game + '</li>');\n                });\n            }\n        },\n        dataType: 'json'\n    });\n}\n$('#continue, #go-to-list, #refresh').click(function () {\n    loadGames();\n});\n\nfunction createGame(game_title) {\n    $.ajax({\n        type    : \"POST\",\n        data    : {title: game_title, api_key: api_key},\n        url     : url.games,\n        success : function (data) {\n            game_id = data.data.id;\n            hideAll();\n            in_game = true;\n            $('[data-game-title]').html(data.data.game);\n            $('#game-box').show();\n            NewGame(data.data.board, data.data.red, data.data.black, data.data.my_turn, data.data.red_turn);\n        },\n        dataType: 'json'\n    });\n}\n$('#create-new-game').click(function () {\n    swal({\n            title           : \"Create new game\",\n            text : \"Type in game title:\",\n            type : \"input\",\n            showCancelButton: true,\n            closeOnConfirm  : false,\n            animation       : \"slide-from-top\",\n            inputPlaceholder: \"Game title\"\n        },\n        function (game_title) {\n            if (game_title === false) return false;\n\n            if (game_title === \"\") {\n                swal.showInputError(\"Game title is required!\");\n                return false\n            }\n            swal.close();\n            createGame(game_title);\n        });\n});\n\n$('#logout').click(function () {\n    hideAll();\n    $('#log-in-box').show();\n});\n\nfunction getBoard() {\n    $.ajax({\n        type    : \"GET\",\n        data    : {api_key: api_key},\n        url     : url.games + '/' + game_id,\n        success : function (data) {\n            hideAll();\n            in_game = true;\n            $('[data-game-title]').html(data.data.game);\n            $('#game-box').show();\n            NewGame(data.data.board, data.data.red, data.data.black, data.data.my_turn, data.data.red_turn);\n        },\n        dataType: 'json'\n    });\n}\n$('body').on('click', '[data-game-id]', function () {\n    game_id = $(this).data('game-id');\n    getBoard();\n});\n\nsetInterval(function () {\n    if (in_game && !myy_turn) {\n        getBoard();\n    }\n}, 1000);\n\nfunction doMove(move) {\n    $.ajax({\n        type    : \"POST\",\n        url     : url.games + '/' + game_id,\n        data    : {api_key: api_key, move: move},\n        success : function (data) {\n            in_game = true;\n            NewGame(data.data.board, data.data.red, data.data.black, data.data.my_turn, data.data.red_turn);\n        },\n        error   : function (data) {\n            swal('Forbidden', data.responseJSON.error.message, \"error\");\n        },\n        dataType: 'json'\n    });\n}"],"sourceRoot":"/source/"}